<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inner Sanctum - Complete Debug Menu Guide</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: #0a0a1a;
            color: #e0e0e0;
            padding: 20px;
            
        }
        .container { max-width: 1600px; margin: 0 auto; }
        h1 {
            color: #ff6b6b;
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .toc {
            background: #1a1a3e;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 5px solid #4ecdc4;
        }
        .toc h2 { color: #4ecdc4; margin-bottom: 15px; }
        .toc ul { list-style: none; columns: 2; }
        .toc li { margin-bottom: 8px; }
        .toc a {
            color: #ffd93d;
            text-decoration: none;
            display: block;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .toc a:hover { background: #252542; }
        .section {
            background: #1a1a2e;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .section h2 {
            color: #4ecdc4;
            border-bottom: 2px solid #4ecdc4;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .setting {
            background: #252542;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #666;
        }
        .setting.critical { border-left-color: #ff0000; }
        .setting.important { border-left-color: #ff6600; }
        .setting.normal { border-left-color: #4ecdc4; }
        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .setting-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #fff;
        }
        .setting-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .badge-video { background: #9b59b6; color: #fff; }
        .badge-core { background: #3498db; color: #fff; }
        .location {
            background: #0f0f23;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #aaa;
            display: inline-block;
            margin-bottom: 15px;
        }
        .description {
            color: #ccc;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: #1a1a3e;
            border-radius: 6px;
        }
        .option {
            background: #2d2d5a;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
        }
        .option.recommended {
            border: 2px solid #4ecdc4;
        }
        .option-label {
            font-size: 0.85em;
            color: #888;
            margin-top: 5px;
        }
        code {
            background: #0f0f23;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #4ecdc4;
        }
        pre {
            background: #0f0f23;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #333;
        }
        pre code {
            background: none;
            padding: 0;
            color: #e0e0e0;
        }
        .note {
            background: linear-gradient(135deg, #1a3d1a 0%, #2d5a2d 100%);
            border-left: 5px solid #00cc66;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }
        .note h4 { color: #00cc66; margin-bottom: 8px; }
        .warning {
            background: linear-gradient(135deg, #3d1f00 0%, #5a3a00 100%);
            border-left: 5px solid #ff6600;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }
        .warning h4 { color: #ff6600; margin-bottom: 8px; }
        .example {
            background: #2d2d5a;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #ffd93d;
        }
        .example h4 { color: #ffd93d; margin-bottom: 10px; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        th {
            background: #2d2d5a;
            color: #4ecdc4;
        }
        tr:hover { background: #252542; }
        .menu-nav {
            background: #2d2d5a;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }
        .menu-nav h3 { color: #ffd93d; margin-bottom: 15px; }
        .key-combo {
            display: inline-block;
            background: #3a3a5a;
            padding: 8px 15px;
            border-radius: 4px;
            margin: 5px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Inner Sanctum - Complete Debug Menu Guide</h1>
        <p class="subtitle">Comprehensive documentation of every debug setting for users and developers<br>VMU Pro 3D Raycasting Engine<br><strong>Target Hardware:</strong> VMU Pro (ESP32 microcontroller)</p>

        <div class="toc">
            <h2>üìë Quick Navigation</h2>
            <ul>
                <li><a href="#how-to-access">How to Access the Debug Menu</a></li>
                <li><a href="#core-settings">Core Debug Settings (13 items)</a></li>
                <li><a href="#video-settings">Video Settings (24 items)</a></li>
                <li><a href="#performance-guide">Performance Optimization Guide</a></li>
                <li><a href="#developer-notes">Developer Notes</a></li>
            </ul>
        </div>

        <div class="section" id="how-to-access">
            <h2>üîß How to Access the Debug Menu</h2>

            <div class="menu-nav">
                <h3>Navigation Controls</h3>
                <p style="margin-bottom: 15px;">Use these button combinations to navigate the debug menu:</p>
                <span class="key-combo">UP/DOWN</span> Move selection
                <span class="key-combo">LEFT/RIGHT</span> Adjust setting value
                <span class="key-combo">A BUTTON</span> Confirm selection
                <span class="key-combo">B BUTTON</span> Go back
            </div>

            <div class="example">
                <h4>Accessing Debug Menu</h4>
                <ol style="margin-left: 20px;">
                    <li>From the title screen, select <strong>"OPTIONS"</strong></li>
                    <li>In the options menu, select <strong>"DEBUG"</strong></li>
                    <li>You are now in the debug menu with two pages:
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>DEBUG PAGE</strong> - Core gameplay settings</li>
                            <li><strong>VIDEO PAGE</strong> - Graphics and rendering settings</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="note">
                <h4>üí° Tip</h4>
                <p>The first option in each menu page switches between DEBUG and VIDEO pages. Select it to toggle between the two.</p>
            </div>
        </div>

        <!-- CORE DEBUG SETTINGS -->
        <div class="section" id="core-settings">
            <h2>‚öôÔ∏è Core Debug Settings (DEBUG PAGE)</h2>
            <p style="margin-bottom: 20px;">These settings control core gameplay behavior, logging, raycast mode selection, adaptive ray budget, performance monitoring, and double-buffer A/B testing.</p>

            <!-- SETTING 1 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">1. PAGE</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>titleDebugPage</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Switches between DEBUG and VIDEO pages.</p>
                    <p>Use this to move between core tuning and video/render tuning without leaving the debug menu.</p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>DEBUG</div>
                        <div class="option-label">Core settings page</div>
                    </div>
                    <div class="option">
                        <div>VIDEO</div>
                        <div class="option-label">Video settings page</div>
                    </div>
                </div>
            </div>

            <!-- SETTING 2 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">2. LOGS</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>enableBootLogs</code>, <code>enablePerfLogs</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables or disables debug logging output.</p>
                    <p>When ON, the game outputs detailed logging information including:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Boot sequence initialization steps</li>
                        <li>Performance metrics (FPS logging)</li>
                        <li>Wall quad rendering information</li>
                        <li>Error and warning messages</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>ON</div>
                        <div class="option-label">Enable all logging</div>
                    </div>
                    <div class="option recommended">
                        <div>OFF</div>
                        <div class="option-label">Disable logging (Recommended for play)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ When to Use</h4>
                    <ul style="margin-left: 20px;">
                        <li><strong>Development:</strong> Enable to diagnose initialization issues</li>
                        <li><strong>Performance Testing:</strong> Enable to see FPS metrics</li>
                        <li><strong>Normal Play:</strong> Disable for slightly better performance</li>
                    </ul>
                </div>

                <div class="example">
                    <h4>Example Output (When ON)</h4>
                    <pre><code>BOOT: app.lua loaded
BOOT: import ok api/system
PERF: FPS 28.5
BOOT: B1 loop start</code></pre>
                </div>
            </div>

            <!-- SETTING 3 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">3. ENEMIES</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>DEBUG_DISABLE_ENEMIES</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Toggles enemy AI and rendering on/off.</p>
                    <p>When OFF, all enemies are disabled - they don't spawn, move, attack, or render. This is useful for:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Performance testing (isolates rendering performance)</li>
                        <li>Level exploration without combat</li>
                        <li>Development/testing level geometry</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Enemies enabled (Normal gameplay)</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Enemies disabled</div>
                    </div>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Important</h4>
                    <p>When enemies are disabled, you cannot complete levels (killing enemies is required to win). Enemy spawn points still exist but enemies won't appear.</p>
                </div>
            </div>

            <!-- SETTING 4 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">4. PROPS</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>DEBUG_DISABLE_PROPS</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Toggles decorative props (barrels, crates, etc.) on/off.</p>
                    <p>Props are non-interactive decorative objects placed in levels. Disabling them:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Reduces sprite count for better performance</li>
                        <li>Removes visual clutter</li>
                        <li>Does NOT affect gameplay (no collision)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Show props (Normal)</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Hide props</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Performance Tip</h4>
                    <p>If you're experiencing frame rate drops, try disabling props. They're purely cosmetic and won't affect gameplay.</p>
                </div>
            </div>

            <!-- SETTING 5 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">5. BLOCK DBG</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>DEBUG_SHOW_BLOCK</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Displays combat/blocking debug information on screen.</p>
                    <p>When ON, shows visual feedback for player blocking mechanics including:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Blocking angle indicators</li>
                        <li>Successful block notifications</li>
                        <li>Damage reduction percentages</li>
                        <li>Prime block (perfect block) indicators</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>ON</div>
                        <div class="option-label">Show block debug info</div>
                    </div>
                    <div class="option recommended">
                        <div>OFF</div>
                        <div class="option-label">Hide debug info (Normal)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ When to Use</h4>
                    <p>Enable this when learning the combat system or practicing perfect blocks. The visual feedback helps you understand the blocking mechanics and timing windows.</p>
                </div>
            </div>

            <!-- SETTING 6 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">6. FPS TARGET</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>FPS_TARGET_MODE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Controls frame rate limiting/pacing for the game.</p>
                    <p>This setting caps the maximum FPS to maintain consistent performance:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Uncapped:</strong> Runs as fast as hardware allows (may drain battery)</li>
                        <li><strong>60 FPS:</strong> Standard console-quality frame rate (16.67ms per frame)</li>
                        <li><strong>45 FPS:</strong> Balanced setting (22.22ms per frame)</li>
                        <li><strong>30 FPS:</strong> Classic console frame rate (33.33ms per frame)</li>
                        <li><strong>24 FPS:</strong> Cinema standard (41.67ms per frame)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>UNCAPPED</div>
                        <div class="option-label">No limit</div>
                    </div>
                    <div class="option recommended">
                        <div>60</div>
                        <div class="option-label">Best quality (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>45</div>
                        <div class="option-label">Balanced</div>
                    </div>
                    <div class="option">
                        <div>30</div>
                        <div class="option-label">Good performance</div>
                    </div>
                    <div class="option">
                        <div>24</div>
                        <div class="option-label">Maximum performance</div>
                    </div>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Performance vs Quality</h4>
                    <p>Lower FPS targets = better battery life and more consistent performance, but choppier animation. Higher FPS = smoother animation but may drain battery faster on VMU Pro.</p>
                </div>

                <div class="example">
                    <h4>Technical Details</h4>
                    <p>The game uses frame pacing with <code>vmupro.system.delayMs()</code> (from remaining microseconds) to sleep the remaining time in each frame. For example, at 60 FPS target:</p>
                    <pre><code>targetFrameUs = 16667  -- microseconds per frame
elapsedUs = frameEndUs - frameStartUs
remainingUs = targetFrameUs - elapsedUs
if remainingUs > 0 then
    vmupro.system.delayMs(math.floor(remainingUs / 1000))
end</code></pre>
                </div>
            </div>

            <!-- SETTING 7 -->
            <div class="setting critical">
                <div class="setting-header">
                    <span class="setting-title">7. AUDIO MIX</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>AUDIO_UPDATE_TARGET_HZ</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Controls audio mixer update frequency independent of video FPS.</p>
                    <p><strong>IMPORTANT:</strong> This separates audio timing from frame rate. Even if the game runs at 30 FPS, audio can still mix at higher quality rates:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>60 Hz:</strong> Highest quality audio (updates every 16.67ms)</li>
                        <li><strong>45 Hz:</strong> Good quality (updates every 22.22ms)</li>
                        <li><strong>30 Hz:</strong> Acceptable (updates every 33.33ms)</li>
                        <li><strong>20 Hz:</strong> Minimum quality (updates every 50ms)</li>
                    </ul>
                    <p style="margin-top: 10px;">Lower values save CPU but may cause audio stutter or crackling.</p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>20 HZ</div>
                        <div class="option-label">Lowest CPU usage</div>
                    </div>
                    <div class="option">
                        <div>30 HZ</div>
                        <div class="option-label">Acceptable quality</div>
                    </div>
                    <div class="option">
                        <div>45 HZ</div>
                        <div class="option-label">Good quality</div>
                    </div>
                    <div class="option recommended">
                        <div>60 HZ</div>
                        <div class="option-label">Best quality (Recommended)</div>
                    </div>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Audio Quality Warning</h4>
                    <p>Setting this too low (20-25 Hz) may cause noticeable audio artifacts like clicking or popping. Keep at 45-60 Hz for best audio quality unless you need the CPU performance.</p>
                </div>

                <div class="note">
                    <h4>‚úÖ Recommended Configuration</h4>
                    <p><strong>Best performance/quality balance:</strong> Set FPS TARGET to 30 and AUDIO MIX to 60. This gives smooth 30 FPS gameplay while maintaining high-quality audio mixing.</p>
                </div>
            </div>

            <!-- SETTING 8 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">8. RENDER</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>RENDERER_MODE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Rendering engine mode selector.</p>
                    <p><strong>NOTE:</strong> This is locked to <code>"exp_hybrid"</code> and cannot be changed. The experimental hybrid renderer is the only supported mode.</p>
                    <p>This setting exists for future compatibility but currently has no function.</p>
                </div>

                <div class="note">
                    <h4>‚ÑπÔ∏è Information</h4>
                    <p>The exp_hybrid renderer combines experimental wall rendering with optimized sprite handling. It's the result of extensive performance optimization work.</p>
                </div>
            </div>

            <!-- SETTING 9 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">9. RAYCAST</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>USE_FIXED_RAYCAST</code>, <code>DEBUG_FORCE_FLOAT_RAYCAST</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Selects wall raycasting math path for EXP-H validation.</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>FIXED:</strong> Fixed-point DDA with high-resolution direction table (default)</li>
                        <li><strong>FLOAT:</strong> Float DDA fallback path for A/B checks</li>
                    </ul>
                </div>

                <div class="note">
                    <h4>‚úÖ Validation Tip</h4>
                    <p>Use this together with FPS/perf monitor to compare render behavior and timing at the same video settings.</p>
                    <p>The FIXED path is hardened for VMU numeric limits (arithmetic fixed-point operations, no bit-shift dependency in hot ray DDA).</p>
                </div>
            </div>

            <!-- SETTING 10 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">10. PERF MON</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>DEBUG_PERF_MONITOR</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables sampled performance monitor overlay and periodic PERF logs.</p>
                    <p>Shows EMA timing for frame/raycast/wall/fog plus wall-span counters and active ray preset/mode information.</p>
                    <p>Also shows <code>W1=</code> wall format, <code>K=</code> wall key mode, and <code>MP 0/1/2/3/4</code> mip-tier coverage counters.</p>
                    <p>Overlay rows are laid out on fixed 16px vertical spacing to prevent row collisions with each other and with lower HUD lines.</p>
                    <p>Text background no longer uses black. Runtime uses SDK clear-color when available; otherwise it falls back to a non-black dark background for readability.</p>
                </div>
            </div>

            <!-- SETTING 11 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">11. AUTO RAYS</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>ADAPTIVE_RAY_BUDGET_ENABLED</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Phase 2 adaptive ray-budget controller toggle.</p>
                    <p>When ON, the renderer automatically adjusts active ray preset within safe bounds to maintain frame budget, using EMA + hysteresis + cooldown.</p>
                </div>
            </div>

            <!-- SETTING 12 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">12. DBUF</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>
                <div class="location">Variable: <code>DEBUG_DOUBLE_BUFFER</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Toggles true double-buffer presentation path for A/B testing.</p>
                    <p>ON uses <code>startDoubleBufferRenderer()</code> + <code>pushDoubleBufferFrame()</code>. OFF uses standard <code>refresh()</code>.</p>
                    <p>Use with PERF MON to compare timing and memory deltas (<code>dU</code>, <code>dL</code>).</p>
                    <p>SDK note: there is no exposed triple-buffer API in current VMU Pro Lua docs; only true double buffer is available.</p>
                </div>
            </div>

            <!-- SETTING 13 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">13. BACK</span>
                    <span class="setting-badge badge-core">CORE</span>
                </div>

                <div class="description">
                    <p><strong>Purpose:</strong> Returns to the previous menu.</p>
                    <p>Selecting this exits the debug menu and returns to the options menu.</p>
                </div>
            </div>
        </div>

        <!-- VIDEO SETTINGS -->
        <div class="section" id="video-settings">
            <h2>üé® Video Settings (VIDEO PAGE - 24 items)</h2>
            <p style="margin-bottom: 20px;">These settings control graphics, rendering quality, and visual effects.</p>
            <div class="note">
                <h4>Verified Behavior (2026-02-11)</h4>
                <p>All settings in this section were re-verified against <code>app_full.lua</code> and VMU Pro SDK docs in <code>vmupro-sdk/docs/api/</code>. Notes below reflect current runtime behavior in EXP-H.</p>
            </div>

            <!-- SETTING 1 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">1. PAGE</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>

                <div class="description">
                    <p><strong>Purpose:</strong> Switches between DEBUG and VIDEO menu pages.</p>
                    <p>Toggles between:
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>DEBUG:</strong> Core gameplay settings (see above)</li>
                        <li><strong>VIDEO:</strong> Graphics and rendering settings (this page)</li>
                    </ul>
                </div>

                <div class="note">
                    <h4>üí° Quick Navigation</h4>
                    <p>You can quickly switch between pages by selecting this first option and pressing LEFT/RIGHT.</p>
                </div>
            </div>

            <!-- SETTING 2 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">2. TEXTURES</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>DEBUG_DISABLE_WALL_TEXTURE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables or disables wall texture rendering.</p>
                    <p>When OFF, walls render with solid colors instead of textures. This:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Performance:</strong> Significantly improves frame rate (no texture lookups/sampling)</li>
                        <li><strong>Visual:</strong> Walls show flat colors based on wall type</li>
                        <li><strong>Memory:</strong> Reduces memory usage (textures unloaded when disabled)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Textured walls (Best looking)</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Flat color walls (Fastest)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Performance Tip</h4>
                    <p>If you're experiencing severe frame rate issues, try disabling textures. This is the single most effective graphics setting for improving performance.</p>
                </div>

                <div class="example">
                    <h4>Visual Comparison</h4>
                    <table>
                        <tr>
                            <th>Setting</th>
                            <th>Appearance</th>
                            <th>Performance Impact</th>
                        </tr>
                        <tr>
                            <td>ON</td>
                            <td>Detailed stone/brick/wood textures</td>
                            <td>~30-40% more GPU work</td>
                        </tr>
                        <tr>
                            <td>OFF</td>
                            <td>Flat gray/brown/maroon colors</td>
                            <td>Baseline performance</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- SETTING 3 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">3. ROOF TEX</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>DEBUG_DISABLE_ROOF_TEXTURE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables or disables ceiling/roof texture rendering.</p>
                    <p>When OFF, the ceiling renders as a solid color (usually black or dark gray). The ceiling is only visible in outdoor areas or rooms with low walls.</p>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Textured ceiling</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Solid color ceiling</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ When to Disable</h4>
                    <p>Most dungeons have high walls, so you rarely see the ceiling. Disabling this can give a small performance boost with minimal visual impact.</p>
                </div>
            </div>

            <!-- SETTING 4 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">4. MIPMAP</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>WALL_MIPMAP_ENABLED</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables or disables distance-based wall detail reduction.</p>
                    <p>In the current EXP-H renderer this uses <strong>distance-tier LOD</strong> with two effects:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Ray-stride LOD:</strong> Fewer far-distance ray samples</li>
                        <li><strong>Texture-column quantization:</strong> Coarser far texture column selection at higher mip tiers</li>
                    </ul>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>ON:</strong> Can improve performance by reducing far-distance sampling density</li>
                        <li><strong>OFF:</strong> Keeps more uniform sampling, usually sharper but heavier</li>
                        <li><strong>No extra VRAM mip chain</strong> is allocated; this is runtime sampling LOD</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Mipmapping enabled (Smoother)</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Mipmapping disabled (Sharper but may shimmer)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Recommendation</h4>
                    <p>Leave ON for most play sessions. Turn OFF only when you explicitly want uniform sampling behavior for visual debugging.</p>
                </div>

                <div class="example">
                    <h4>Technical Details</h4>
                    <p>The game uses 4 distance thresholds (MIP1-MIP4) that choose LOD tiers:</p>
                    <ul style="margin-left: 20px;">
                        <li><strong>MIP1:</strong> First distance tier (lightest LOD)</li>
                        <li><strong>MIP2:</strong> Mid-distance tier (moderate reduction)</li>
                        <li><strong>MIP3:</strong> Far-distance tier (stronger reduction)</li>
                        <li><strong>MIP4:</strong> Very-far tier (most aggressive reduction)</li>
                    </ul>
                    <p>MIP thresholds are evaluated independently (no runtime auto-compression). If upper tiers are beyond your active textured range, lower them directly in MIP3/MIP4 settings.</p>
                </div>
            </div>

            <!-- SETTING 5 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">5. MIP LOD</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>MIP_LOD_ENABLED</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Enables/disables use of the configured MIP distance thresholds.</p>
                    <p>When ON, thresholds MIP1-MIP4 actively control far-distance LOD behavior. This:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Improves performance in depth-heavy scenes</li>
                        <li>Lets you tune quality/perf tradeoff with MIP1-MIP4</li>
                        <li>Works together with <code>MIPMAP</code> (both should be ON for this path)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">LOD enabled</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">LOD disabled</div>
                    </div>
                </div>
            </div>

            <!-- SETTING 6 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">6. RAYS</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>RAY_PRESETS</code>, <code>RAY_PRESET_INDEX</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Controls raycasting resolution (number of horizontal rays cast).</p>
                    <p><strong>How raycasting works:</strong> The game casts rays from the camera to detect walls. Each ray renders one vertical column of pixels.</p>
                    <p style="margin-top: 10px;"><strong>More rays = higher quality, more CPU work</strong></p>
                    <p style="margin-top: 10px;"><strong>Fewer rays = lower quality, less CPU work</strong></p>
                    <p style="margin-top: 10px;"><strong>Note:</strong> if <code>WALL RES</code> is set to FAST, runtime uses one preset step lower than the selected value (shown in-menu as <code>base-&gt;effective</code>).</p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>12√ó20</div>
                        <div class="option-label">Lowest quality (Best performance)</div>
                    </div>
                    <div class="option">
                        <div>24√ó10</div>
                        <div class="option-label">Low quality</div>
                    </div>
                    <div class="option">
                        <div>30√ó8</div>
                        <div class="option-label">Medium quality</div>
                    </div>
                    <div class="option">
                        <div>40√ó6</div>
                        <div class="option-label">Good quality</div>
                    </div>
                    <div class="option recommended">
                        <div>60√ó4</div>
                        <div class="option-label">High quality (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>120√ó2</div>
                        <div class="option-label">Ultra quality (Slow)</div>
                    </div>
                    <div class="option">
                        <div>240√ó1</div>
                        <div class="option-label">Maximum quality (Very slow)</div>
                    </div>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Major Performance Impact</h4>
                    <p>This is one of the most impactful performance settings. Going from 60√ó4 to 120√ó2 doubles the raycasting work. Going to 240√ó1 quadruples it compared to 60√ó4.</p>
                </div>

                <div class="example">
                    <h4>Performance Comparison</h4>
                    <table>
                        <tr>
                            <th>Preset</th>
                            <th>Rays</th>
                            <th>Column Width</th>
                            <th>Relative CPU Cost</th>
                        </tr>
                        <tr>
                            <td>12√ó20</td>
                            <td>12</td>
                            <td>20 pixels</td>
                            <td>20% (baseline)</td>
                        </tr>
                        <tr>
                            <td>60√ó4</td>
                            <td>60</td>
                            <td>4 pixels</td>
                            <td>100% (5√ó more work)</td>
                        </tr>
                        <tr>
                            <td>120√ó2</td>
                            <td>120</td>
                            <td>2 pixels</td>
                            <td>200% (10√ó more work)</td>
                        </tr>
                        <tr>
                            <td>240√ó1</td>
                            <td>240</td>
                            <td>1 pixel</td>
                            <td>400% (20√ó more work)</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- SETTING 7 -->
            <div class="setting critical">
                <div class="setting-header">
                    <span class="setting-title">7. DRAW DIST</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>EXP_TEX_MAX_DIST</code>, <code>DRAW_DIST_INDEX</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Maximum distance at which wall textures are rendered.</p>
                    <p>Walls beyond this distance render as solid colors (using fog color). This:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Reduces rendering work</strong> (distant walls don't sample textures)</li>
                        <li><strong>Creates natural fog effect</strong> (hides draw distance)</li>
                        <li><strong>Improves performance</strong> (especially with high ray counts)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>2.0</div>
                        <div class="option-label">Very short distance (Maximum performance)</div>
                    </div>
                    <div class="option">
                        <div>4.0</div>
                        <div class="option-label">Short distance</div>
                    </div>
                    <div class="option">
                        <div>6.0</div>
                        <div class="option-label">Medium distance</div>
                    </div>
                    <div class="option recommended">
                        <div>8.0</div>
                        <div class="option-label">Good balance (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>10.0</div>
                        <div class="option-label">Long distance</div>
                    </div>
                    <div class="option">
                        <div>12.0+</div>
                        <div class="option-label">Maximum distance</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Performance Tip</h4>
                    <p>Reducing draw distance is one of the most effective ways to improve performance. Combine with higher RAYS setting for close-up detail without distant texture work.</p>
                </div>
            </div>

            <!-- SETTING 8 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">8. FAR TEX OFF</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FAR_TEX_OFF_DIST</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Distance beyond which ALL wall textures are disabled (not just mipmapped).</p>
                    <p>Unlike MIPMAP/MIP LOD (which reduce far detail), this setting completely disables texture rendering beyond a certain point. Values:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>OFF (999):</strong> No far texture cutoff (use mipmaps only)</li>
                        <li><strong>3-10:</strong> Specific distance cutoff</li>
                    </ul>
                    <p>This is more aggressive than DRAW DIST and can improve performance in large open areas.</p>
                </div>

                <div class="note">
                    <h4>‚úÖ When to Use</h4>
                    <p>Enable this if you have large open areas and still see performance issues even with reduced DRAW DIST. It completely eliminates texture work for very distant walls.</p>
                </div>
            </div>

            <!-- SETTINGS 9-12 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">9-12. MIP1-MIP4 DIST</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variables: <code>WALL_MIPMAP_DIST1-4</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Distance thresholds for LOD stride tiers.</p>
                    <p>Controls when the renderer increases far-distance LOD tiering:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>MIP1 DIST:</strong> First LOD threshold</li>
                        <li><strong>MIP2 DIST:</strong> Second LOD threshold</li>
                        <li><strong>MIP3 DIST:</strong> Third LOD threshold</li>
                        <li><strong>MIP4 DIST:</strong> Most aggressive far-distance threshold</li>
                    </ul>
                    <p>Higher values keep dense sampling farther out (better quality, more cost).</p>
                    <p style="margin-top: 10px;"><strong>Runtime behavior by tier:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 8px;">
                        <li><strong>MIP0/near:</strong> Full detail</li>
                        <li><strong>MIP1:</strong> Light LOD (minimal change)</li>
                        <li><strong>MIP2:</strong> Coarser far sampling + texture column grouping</li>
                        <li><strong>MIP3:</strong> Stronger grouping than MIP2</li>
                        <li><strong>MIP4:</strong> Most aggressive far detail reduction</li>
                    </ul>
                </div>

                <div class="note">
                    <h4>‚ÑπÔ∏è Advanced Tuning</h4>
                    <p>These settings do <strong>not</strong> auto-adjust when DRAW DIST changes. They are independent and intended for manual tuning.</p>
                </div>
            </div>

            <!-- SETTING 13 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">13. FOG START</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FOG_START</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Distance at which fog effect begins fading in.</p>
                    <p>Fog is used to hide the draw distance transition. Walls between FOG START and FOG FULL gradually fade to the fog color.</p>
                    <p style="margin-top: 10px;"><strong>Lower value = fog starts closer = more aggressive hiding</strong></p>
                    <p style="margin-top: 10px;"><strong>Higher value = fog starts farther = more visible distance</strong></p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>2.0 - 4.0</div>
                        <div class="option-label">Close fog (Performance)</div>
                    </div>
                    <div class="option">
                        <div>6.0 - 8.0</div>
                        <div class="option-label">Medium fog</div>
                    </div>
                    <div class="option recommended">
                        <div>10.0+</div>
                        <div class="option-label">Far fog (Best visibility)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Visual Quality Tip</h4>
                    <p>Set FOG START slightly lower than DRAW DIST for a smooth transition. For example, with DRAW DIST at 8.0, set FOG START at 6.0-7.0.</p>
                </div>
            </div>

            <!-- SETTING 14 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">14. FOG FULL</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FOG_END</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Distance at which fog becomes completely opaque (solid color).</p>
                    <p>Controls where fog overlay reaches full opacity. This mainly affects visual fade behavior.</p>
                    <p style="margin-top: 10px;"><strong>This should be ‚â• FOG START</strong></p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>4.0 - 6.0</div>
                        <div class="option-label">Short visibility</div>
                    </div>
                    <div class="option recommended">
                        <div>8.0 - 10.0</div>
                        <div class="option-label">Balanced (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>12.0+</div>
                        <div class="option-label">Long visibility</div>
                    </div>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Important</h4>
                    <p>Primary wall trace distance is controlled by <code>DRAW DIST</code>. <code>FOG FULL</code> controls fog opacity and the fog curtain range.</p>
                </div>
            </div>

            <!-- SETTING 15 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">15. FOG CUT L</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FOG_TEX_CUTOFF</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Distance where wall texturing is force-disabled even when walls are still rendered.</p>
                    <p>In EXP-H this setting is active and affects far-wall rendering cost/appearance.</p>
                    <p>Use this when you want long visibility but cheaper far rendering.</p>
                </div>

                <div class="note">
                    <h4>‚ÑπÔ∏è Information</h4>
                    <p>Setting this lower than DRAW DIST gives an extra performance lever: far walls stay visible but use flat shading instead of texture sampling.</p>
                </div>
            </div>

            <!-- SETTING 16 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">16. FOG COLOR</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FOG_COLOR</code>, <code>FOG_COLOR_INDEX</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Color of the fog/haze effect.</p>
                    <p>Choose from preset colors to set the mood:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>DARK:</strong> Dark gray (default dungeon atmosphere)</li>
                        <li><strong>GRAY:</strong> Medium gray</li>
                        <li><strong>LGRAY:</strong> Light gray (brighter feel)</li>
                        <li><strong>WHITE:</strong> White (misty/foggy atmosphere)</li>
                        <li><strong>BLACK:</strong> Pure black (darkness)</li>
                        <li><strong>MAROON:</strong> Dark red (bloody/evil atmosphere)</li>
                    </ul>
                </div>

                <div class="example">
                    <h4>Atmosphere Examples</h4>
                    <table>
                        <tr>
                            <th>Color</th>
                            <th>Best For</th>
                            <th>Mood</th>
                        </tr>
                        <tr>
                            <td>DARK/GRAY</td>
                            <td>Standard dungeons</td>
                            <td>Gloomy, realistic</td>
                        </tr>
                        <tr>
                            <td>WHITE</td>
                            <td>Crypts, catacombs</td>
                            <td>Eerie, misty</td>
                        </tr>
                        <tr>
                            <td>MAROON</td>
                            <td>Hellish, evil areas</td>
                            <td>Threatening, bloody</td>
                        </tr>
                        <tr>
                            <td>BLACK</td>
                            <td>Very dark areas</td>
                            <td>Pitch darkness</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- SETTING 17 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">17. FOG DTHR</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>FOG_DITHER_SIZE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Dithering pattern size for fog blending.</p>
                    <p><strong>What is dithering?</strong> A technique to blend fog smoothly by adding noise. This prevents visible banding (stripes) in the fog gradient.</p>
                    <p>Values range from 1-6. Higher values = coarser dither pattern but may look more natural.</p>
                </div>

                <div class="options-grid">
                    <div class="option">
                        <div>1 - 2</div>
                        <div class="option-label">Fine dither (Smoother)</div>
                    </div>
                    <div class="option recommended">
                        <div>3</div>
                        <div class="option-label">Balanced (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>4 - 6</div>
                        <div class="option-label">Coarse dither (More natural)</div>
                    </div>
                </div>
            </div>

            <!-- SETTING 18 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">18. WALL RES</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>LOW_RES_MODE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Wall rendering quality/performance mode.</p>
                    <p>Controls runtime resolution bias on top of the selected RAYS preset:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>QUALITY:</strong> Uses the selected RAYS preset directly</li>
                        <li><strong>FAST:</strong> Uses one preset step lower (fewer rays / wider columns)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>QUALITY</div>
                        <div class="option-label">Best looking (Recommended)</div>
                    </div>
                    <div class="option">
                        <div>FAST</div>
                        <div class="option-label">Better performance</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Performance Tip</h4>
                    <p>If you need extra performance, set FAST and keep your preferred RAYS preset. The renderer applies a one-step quality bias automatically.</p>
                </div>
            </div>

            <!-- SETTING 19 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">19. FPS OVL</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>showFpsOverlay</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Shows real-time FPS (frames per second) overlay on screen.</p>
                    <p>When ON, displays current frame rate in the corner of the screen. Useful for:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Performance monitoring</li>
                        <li>Testing different settings</li>
                        <li>Diagnosing frame rate issues</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Show FPS</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Hide FPS (Cleaner screen)</div>
                    </div>
                </div>
            </div>

            <!-- SETTING 20 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">20. MINIMAP</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>SHOW_MINIMAP</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Shows/hides the radar/minimap overlay.</p>
                    <p>The minimap displays:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Your current position (center dot)</li>
                        <li>Enemy positions (red dots)</li>
                        <li>Exit location (green area)</li>
                        <li>Walls/obstacles (gray lines)</li>
                    </ul>
                </div>

                <div class="options-grid">
                    <div class="option recommended">
                        <div>ON</div>
                        <div class="option-label">Show minimap (Helpful)</div>
                    </div>
                    <div class="option">
                        <div>OFF</div>
                        <div class="option-label">Hide minimap (Immersive)</div>
                    </div>
                </div>

                <div class="note">
                    <h4>‚úÖ Tip</h4>
                    <p>The minimap is very helpful for navigation in maze-like dungeons. Disable it only if you want a more challenging, exploration-focused experience.</p>
                </div>
            </div>

            <!-- SETTING 21 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">21. WALL1 FMT</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>WALL1_FORMAT_VARIANTS</code>, <code>WALL1_FORMAT_INDEX</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Selects wall-1 texture format variant for A/B testing.</p>
                    <p>Current default build uses <code>PNG16</code> (indexed PNG tiles). Additional variants can be re-added for comparison using the same menu item.</p>
                </div>

                <div class="note">
                    <h4>‚ÑπÔ∏è Debug Capture Tip</h4>
                    <p>With PERF MON enabled, the overlay shows <code>W1=...</code> so screenshots/videos always record which wall format was active.</p>
                </div>
            </div>

            <!-- SETTING 22 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">22. WALL KEY</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>WALL_FORCE_COLORKEY_OVERRIDE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Controls transparent color-key override mode for wall sprites/sheets.</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>RAW:</strong> Uses the texture's loaded transparentColor as-is</li>
                        <li><strong>FORCED:</strong> Forces a non-content key (<code>TEX_FORCE_COLORKEY</code>) to prevent accidental transparency</li>
                    </ul>
                    <p>This setting hot-reloads wall textures immediately on change for instant A/B validation.</p>
                </div>

                <div class="warning">
                    <h4>‚ö†Ô∏è Use Case</h4>
                    <p>If walls look slit-like or unexpectedly transparent, test <code>RAW</code> vs <code>FORCED</code> before changing assets.</p>
                </div>
            </div>

            <!-- SETTING 23 -->
            <div class="setting important">
                <div class="setting-header">
                    <span class="setting-title">23. WALL PROJ</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>
                <div class="location">Variable: <code>WALL_PROJECTION_MODE</code></div>

                <div class="description">
                    <p><strong>Purpose:</strong> Controls projection stability strategy for ray columns.</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>STABLE:</strong> Keeps fixed projection width (no mip-driven ray-stride widening), best for angle consistency and reduced perspective popping</li>
                        <li><strong>ADAPTIVE:</strong> Enables mip-tier ray-stride widening for extra performance headroom</li>
                    </ul>
                    <p>Perf monitor overlay now includes <code>P=STABLE/ADAPTIVE</code> so captures always show projection mode.</p>
                </div>
            </div>

            <!-- SETTING 24 -->
            <div class="setting normal">
                <div class="setting-header">
                    <span class="setting-title">24. BACK</span>
                    <span class="setting-badge badge-video">VIDEO</span>
                </div>

                <div class="description">
                    <p><strong>Purpose:</strong> Returns to the previous menu.</p>
                    <p>Selecting this exits the video settings and returns to the options menu.</p>
                </div>
            </div>
        </div>

        <!-- PERFORMANCE GUIDE -->
        <div class="section" id="performance-guide">
            <h2>üöÄ Performance Optimization Guide</h2>

            <div class="setting critical">
                <h3 style="color: #ff6b6b; margin-bottom: 15px;">Quick Performance Presets</h3>

                <div class="description">
                    <p>Recommended setting combinations for different performance goals:</p>
                    <p><strong>Hardware context:</strong> These recommendations target VMU Pro hardware running on an ESP32 microcontroller.</p>
                </div>

                <table>
                    <tr>
                        <th style="width: 150px;">Preset</th>
                        <th>Settings</th>
                        <th style="width: 200px;">Best For</th>
                    </tr>
                    <tr>
                        <td><strong>MAXIMUM QUALITY</strong></td>
                        <td>
                            ‚Ä¢ FPS TARGET: 60<br>
                            ‚Ä¢ RAYS: 120√ó2 or 240√ó1<br>
                            ‚Ä¢ TEXTURES: ON<br>
                            ‚Ä¢ MIPMAP: ON<br>
                            ‚Ä¢ DRAW DIST: 10-12<br>
                            ‚Ä¢ WALL RES: QUALITY
                        </td>
                        <td>Powerful hardware, screenshots</td>
                    </tr>
                    <tr>
                        <td><strong>BALANCED (Recommended)</strong></td>
                        <td>
                            ‚Ä¢ FPS TARGET: 45 or 60<br>
                            ‚Ä¢ RAYS: 60√ó4<br>
                            ‚Ä¢ TEXTURES: ON<br>
                            ‚Ä¢ MIPMAP: ON<br>
                            ‚Ä¢ DRAW DIST: 8<br>
                            ‚Ä¢ WALL RES: QUALITY<br>
                            ‚Ä¢ PROPS: OFF (optional)
                        </td>
                        <td>Most gameplay scenarios</td>
                    </tr>
                    <tr>
                        <td><strong>PERFORMANCE</strong></td>
                        <td>
                            ‚Ä¢ FPS TARGET: 30<br>
                            ‚Ä¢ RAYS: 24√ó10 or 30√ó8<br>
                            ‚Ä¢ TEXTURES: OFF or ON<br>
                            ‚Ä¢ MIPMAP: ON<br>
                            ‚Ä¢ DRAW DIST: 6<br>
                            ‚Ä¢ WALL RES: FAST<br>
                            ‚Ä¢ PROPS: OFF
                        </td>
                        <td>Older hardware, battery saving</td>
                    </tr>
                    <tr>
                        <td><strong>BATTERY SAVER</strong></td>
                        <td>
                            ‚Ä¢ FPS TARGET: 24<br>
                            ‚Ä¢ RAYS: 12√ó20<br>
                            ‚Ä¢ TEXTURES: OFF<br>
                            ‚Ä¢ MIPMAP: OFF<br>
                            ‚Ä¢ DRAW DIST: 4<br>
                            ‚Ä¢ WALL RES: FAST<br>
                            ‚Ä¢ PROPS: OFF<br>
                            ‚Ä¢ MINIMAP: OFF
                        </td>
                        <td>Maximum battery life</td>
                    </tr>
                </table>
            </div>

            <div class="setting important">
                <h3 style="color: #ffd93d; margin-bottom: 15px;">Performance Impact Ranking</h3>
                <p style="margin-bottom: 15px;">Settings sorted by performance impact (highest to lowest):</p>

                <ol style="margin-left: 20px;">
                    <li><strong>RAYS</strong> - Most impactful (4-20√ó CPU difference)</li>
                    <li><strong>TEXTURES</strong> - Major impact (30-40% GPU work)</li>
                    <li><strong>DRAW DIST</strong> - Major impact (ray trace depth and far rendering)</li>
                    <li><strong>FAR TEX OFF / WALL RES</strong> - Medium impact (far texture cost and preset bias)</li>
                    <li><strong>MIPMAP + MIP LOD</strong> - Medium impact (distance-tier ray + texture LOD)</li>
                    <li><strong>PROPS</strong> - Minor impact (fewer sprites)</li>
                    <li><strong>MINIMAP</strong> - Negligible impact</li>
                </ol>
            </div>

            <div class="setting important">
                <h3 style="color: #ffd93d; margin-bottom: 15px;">Q&A: Lower Rays + Higher Texture Resolution</h3>

                <div class="description">
                    <p><strong>Question:</strong> If I lower rays but load higher-resolution wall images, will it be lighter and still look better?</p>
                    <p><strong>Answer (for VMU Pro / ESP32):</strong> Usually <strong>no</strong>. Lower rays helps performance a lot, but higher texture resolution does not recover the missing wall-column detail from fewer rays.</p>
                    <p>In this renderer, rays define scene sampling quality (shape stability, edge smoothness). Texture resolution only improves detail inside each sampled column.</p>
                </div>

                <table>
                    <tr>
                        <th>Ray Preset</th>
                        <th>Raycasts/Frame</th>
                        <th>Worst-Case DDA Checks (32 steps max)</th>
                        <th>Relative Ray CPU vs 240√ó1</th>
                    </tr>
                    <tr><td><strong>240√ó1</strong></td><td>240</td><td>7,680</td><td>100%</td></tr>
                    <tr><td><strong>120√ó2</strong></td><td>120</td><td>3,840</td><td>50%</td></tr>
                    <tr><td><strong>80√ó3</strong></td><td>80</td><td>2,560</td><td>33%</td></tr>
                    <tr><td><strong>60√ó4</strong></td><td>60</td><td>1,920</td><td>25%</td></tr>
                    <tr><td><strong>40√ó6</strong></td><td>40</td><td>1,280</td><td>17%</td></tr>
                    <tr><td><strong>30√ó8</strong></td><td>30</td><td>960</td><td>13%</td></tr>
                    <tr><td><strong>24√ó10</strong></td><td>24</td><td>768</td><td>10%</td></tr>
                    <tr><td><strong>12√ó20</strong></td><td>12</td><td>384</td><td>5%</td></tr>
                </table>

                <div class="warning">
                    <h4>‚ö†Ô∏è Result</h4>
                    <p>Dropping rays gives large CPU savings. Increasing source texture size mostly increases memory/bandwidth pressure and gives limited visual gain on a 240√ó240 display.</p>
                    <p>Example: moving from 128√ó128 wall sheets to 256√ó256 would be ~4√ó texel memory per wall type, while low rays would still look coarse.</p>
                </div>

                <div class="note">
                    <h4>‚úÖ Practical Recommendation</h4>
                    <p>Use <strong>moderate rays</strong> (typically 60√ó4 or 80√ó3), keep mipmapping enabled, and tune fog/draw distance. This is the best quality/performance balance on ESP32-class hardware.</p>
                </div>
            </div>

            <div class="note">
                <h4>‚úÖ Optimization Strategy</h4>
                <p><strong>If experiencing poor performance:</strong></p>
                <ol style="margin-left: 20px;">
                    <li>Start with <strong>RAYS: 30√ó8</strong> (major improvement)</li>
                    <li>If still slow, set <strong>TEXTURES: OFF</strong></li>
                    <li>Reduce <strong>DRAW DIST to 6.0</strong></li>
                    <li>Set <strong>WALL RES: FAST</strong></li>
                    <li>Finally, reduce <strong>RAYS to 12√ó20</strong> if needed</li>
                </ol>
            </div>
        </div>

        <!-- DEVELOPER NOTES -->
        <div class="section" id="developer-notes">
            <h2>üë®‚Äçüíª Developer Notes</h2>

            <div class="setting normal">
                <h3 style="color: #4ecdc4; margin-bottom: 15px;">Adding New Debug Settings</h3>

                <div class="description">
                    <p>To add a new debug setting:</p>
                </div>

                <div class="example">
                    <h4>Step 1: Define the Variable</h4>
                    <pre><code>-- Add near other debug variables (around line 480-560)
MY_NEW_SETTING = false  -- or initial value</code></pre>

                    <h4>Step 2: Add to buildDebugMenuItems()</h4>
                    <pre><code>-- Add menu item label
local mySettingText = "MY SETTING: " .. (MY_NEW_SETTING and "ON" or "OFF")

-- Add to return table
return {
    pageText,
    -- ... existing items ...
    mySettingText,
    "BACK"
}</code></pre>

                    <h4>Step 3: Add to adjustDebugMenuSelection()</h4>
                    <pre><code>-- Find the next available sel number and add handler
elseif sel == 24 then  -- Use next available number
    MY_NEW_SETTING = (step > 0)
    return true
end</code></pre>
                </div>
            </div>

            <div class="setting normal">
                <h3 style="color: #4ecdc4; margin-bottom: 15px;">Key Functions Reference</h3>

                <table>
                    <tr>
                        <th>Function</th>
                        <th>Location</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td><code>buildDebugMenuItems()</code></td>
                        <td>~line 2512</td>
                        <td>Builds menu text based on current setting values</td>
                    </tr>
                    <tr>
                        <td><code>adjustDebugMenuSelection(sel, delta, wrap)</code></td>
                        <td>~line 2644</td>
                        <td>Handles LEFT/RIGHT adjustment for each setting</td>
                    </tr>
                    <tr>
                        <td><code>stepListIndex(idx, delta, count, wrap)</code></td>
                        <td>~line 2564</td>
                        <td>Helper for cycling through preset arrays</td>
                    </tr>
                    <tr>
                        <td><code>drawTitleScreenImpl()</code></td>
                        <td>~line 2870</td>
                        <td>Renders title/options/debug screens</td>
                    </tr>
                </table>
            </div>

            <div class="setting normal">
                <h3 style="color: #4ecdc4; margin-bottom: 15px;">Preset Array Format</h3>

                <div class="description">
                    <p>Many settings use preset arrays. Format:</p>
                </div>
                <pre><code>-- Example: RAY_PRESETS
RAY_PRESETS = {
    {label = "12√ó20", rays = 12, colW = 20},
    {label = "24√ó10", rays = 24, colW = 10},
    -- ... more presets
}
RAY_PRESET_INDEX = 5  -- Which preset is active</code></pre>

                <div class="note">
                    <h4>üí° Tip</h4>
                    <p>When adding presets, always update the corresponding *_INDEX variable and ensure *_PRESETS array has at least one entry.</p>
                </div>
            </div>

            <div class="setting normal">
                <h3 style="color: #4ecdc4; margin-bottom: 15px;">Movement/Collision Notes</h3>

                <div class="description">
                    <p>Player movement now uses sub-step slide collision with enemy-only sprite blocking.</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Wall checks use circular probe points around the player collision radius</li>
                        <li>Decorative props and pickups are non-blocking for player movement</li>
                        <li>This reduces false corner snagging while keeping wall clipping protection</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; color: #666; font-size: 0.9em; padding: 20px;">
            <p><strong>Inner Sanctum Debug Menu Guide</strong></p>
            <p>Generated from code analysis of app_full.lua</p>
            <p>For questions or issues, refer to the source code at the specified line numbers.</p>
        </div>
    </div>
</body>
</html>
