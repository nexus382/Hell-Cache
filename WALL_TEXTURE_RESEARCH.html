<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wall Texture Research & Optimization - Inner Sanctum</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 20px;
            background: #0d1220;
            color: #e8ecf3;
            font-family: "Segoe UI", Tahoma, Arial, sans-serif;
            line-height: 1.6;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        h1, h2, h3, h4 {
            margin: 0 0 12px 0;
            color: #8dd6ff;
        }
        h2 {
            border-bottom: 2px solid #3b537f;
            padding-bottom: 8px;
        }
        h3 {
            color: #b8c4dc;
            font-size: 18px;
            border-bottom: 1px solid #3b537f;
            padding-bottom: 6px;
        }
        h4 {
            color: #d6e7ff;
            font-size: 15px;
            margin-top: 16px;
        }
        p {
            margin: 8px 0;
        }
        .card {
            background: #131a2b;
            border: 1px solid #253251;
            border-radius: 10px;
            padding: 20px;
            margin: 16px 0;
        }
        .section-block {
            background: #1a2540;
            border: 1px solid #3b537f;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
        }
        .pill {
            display: inline-block;
            padding: 4px 10px;
            border: 1px solid #3b537f;
            border-radius: 20px;
            color: #d6e7ff;
            background: #1a2540;
            margin-right: 6px;
            margin-top: 4px;
            font-size: 12px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background: #101729;
            border: 1px solid #24304a;
        }
        th, td {
            border-bottom: 1px solid #24304a;
            border-right: 1px solid #24304a;
            padding: 12px;
            vertical-align: top;
            text-align: left;
            font-size: 13px;
        }
        th:last-child, td:last-child {
            border-right: none;
        }
        tr:last-child td {
            border-bottom: none;
        }
        th {
            background: #1b2742;
            color: #a9d7ff;
            font-weight: 600;
        }
        .mono {
            font-family: Consolas, "Courier New", monospace;
            color: #c6f0ff;
            font-size: 13px;
        }
        .small {
            font-size: 13px;
            color: #b8c4dc;
        }
        .rating-excellent { color: #98f5b0; font-weight: 600; }
        .rating-good { color: #67e8f9; font-weight: 600; }
        .rating-moderate { color: #ffd28f; font-weight: 600; }
        .rating-limited { color: #ff6b6b; font-weight: 600; }
        .savings-high { color: #98f5b0; font-weight: 600; }
        .savings-medium { color: #ffd28f; font-weight: 600; }
        .priority-critical { background: #ff6b6b; color: white; padding: 2px 8px; border-radius: 4px; font-weight: 600; }
        .priority-high { background: #ffd28f; color: black; padding: 2px 8px; border-radius: 4px; font-weight: 600; }
        .priority-medium { background: #67e8f9; color: black; padding: 2px 8px; border-radius: 4px; font-weight: 600; }
        code {
            background: #0d1220;
            border: 1px solid #3b537f;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: Consolas, monospace;
            font-size: 12px;
            color: #c6f0ff;
        }
        .warning-box {
            background: #3b2a1a;
            border-left: 4px solid #ff6b6b;
            padding: 12px;
            margin: 12px 0;
        }
        .info-box {
            background: #1a3a2a;
            border-left: 4px solid #67e8f9;
            padding: 12px;
            margin: 12px 0;
        }
        .toc {
            background: #1a2540;
            border: 1px solid #3b537f;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }
        .toc a {
            color: #8dd6ff;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
        .toc ul {
            margin: 8px 0 8px 20px;
            padding: 0;
        }
        .toc li {
            margin: 4px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñºÔ∏è Wall Texture Research & Optimization Guide</h1>
        <p class="small">Comprehensive analysis of Inner Sanctum wall textures with optimization strategies for VMU Pro hardware constraints</p>

        <!-- Table of Contents -->
        <div class="toc">
            <h3>üìë Table of Contents</h3>
            <ul>
                <li><a href="#current-texture-inventory">1. Current Texture Inventory</a></li>
                <li><a href="#memory-footprint">2. Memory Footprint Analysis</a></li>
                <li><a href="#compression-techniques">3. Texture Compression Techniques</a></li>
                <li><a href="#optimization-recommendations">4. Optimization Recommendations</a></li>
                <li><a href="#texture-generation-guide">5. Texture Generation Guide</a></li>
                <li><a href="#implementation-roadmap">6. Implementation Roadmap</a></li>
            </ul>
        </div>

        <!-- Section 1: Current Texture Inventory -->
        <div class="card" id="current-texture-inventory">
            <h2>1. Current Texture Inventory</h2>
            <p>Complete analysis of all wall textures in <code>sprites/wall_textures/</code></p>

            <table>
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th>Resolution</th>
                        <th>Format</th>
                        <th>Size (KB)</th>
                        <th>Est. Memory (KB)</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>wall-1-tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Base wall texture</td>
                    </tr>
                    <tr>
                        <td><code>wall-1-tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>12</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>wall-2-tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Base wall texture</td>
                    </tr>
                    <tr>
                        <td><code>wall-2-tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>wall-3-tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Base wall texture</td>
                    </tr>
                    <tr>
                        <td><code>wall-3-tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>wall-4-tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Base wall texture</td>
                    </tr>
                    <tr>
                        <td><code>wall-4-tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>Wall-Diamond-Tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Decorative tile</td>
                    </tr>
                    <tr>
                        <td><code>Wall-Diamond-Tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>Wall-Window-Tile.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Decorative tile</td>
                    </tr>
                    <tr>
                        <td><code>Wall-Window-Tile-table-1-128.png</code></td>
                        <td>128 √ó 128</td>
                        <td>8-bit PNG</td>
                        <td>11</td>
                        <td>16.4</td>
                        <td>Mipmap level 1</td>
                    </tr>
                    <tr>
                        <td><code>roof_dirt_splatter_64.png</code></td>
                        <td>64 √ó 64</td>
                        <td>4-bit PNG</td>
                        <td>8.8</td>
                        <td>4.1</td>
                        <td>Roof/floor texture</td>
                    </tr>
                    <tr style="background: #1b2742;">
                        <td colspan="2"><strong>TOTAL</strong></td>
                        <td></td>
                        <td><strong>~140 KB</strong></td>
                        <td><strong>~200 KB</strong></td>
                        <td><strong>13 textures</strong></td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>üìä Key Findings</h4>
                <ul style="margin: 8px 0 8px 20px; padding: 0;">
                    <li><strong>Format:</strong> All textures use 8-bit palette (256 colors), which is already memory-efficient</li>
                    <li><strong>Resolution:</strong> Base textures are 128√ó128, which is appropriate for 240√ó240 display</li>
                    <li><strong>Mipmaps:</strong> Pre-generated mipmap variants exist (tile-table-1-128.png)</li>
                    <li><strong>Memory:</strong> Estimated 200 KB runtime memory for all wall textures</li>
                    <li><strong>Compression:</strong> PNG files already compressed (8-bit palette)</li>
                </ul>
            </div>
        </div>

        <!-- Section 2: Memory Footprint -->
        <div class="card" id="memory-footprint">
            <h2>2. Memory Footprint Analysis</h2>

            <div class="grid-3">
                <div class="section-block">
                    <h4>Current Configuration</h4>
                    <table>
                        <tr><td><strong>Total Textures</strong></td><td>13</td></tr>
                        <tr><td><strong>Base Resolution</strong></td><td>128 √ó 128 px</td></tr>
                        <tr><td><strong>Color Format</strong></td><td>8-bit (256 colors)</td></tr>
                        <tr><td><strong>Disk Storage</strong></td><td>140 KB</td></tr>
                        <tr><td><strong>Runtime Memory</strong></td><td>~200 KB</td></tr>
                    </table>
                </div>

                <div class="section-block">
                    <h4>Per-Texel Breakdown</h4>
                    <table>
                        <tr><td><strong>Pixels per Texture</strong></td><td>16,384</td></tr>
                        <tr><td><strong>Bytes per Pixel</strong></td><td>1 byte (8-bit)</td></tr>
                        <tr><td><strong>Raw Texture Size</strong></td><td>16 KB</td></tr>
                        <tr><td><strong>VMU Pro Memory</strong></td><td>Uncompressed bitmap</td></tr>
                        <tr><td><strong>Total Wall Memory</strong></td><td>12 √ó 16 KB = 192 KB</td></tr>
                    </table>
                </div>

                <div class="section-block">
                    <h4>Memory Budget Impact</h4>
                    <table>
                        <tr><td><strong>Typical VMU Memory</strong></td><td>Unknown (estimated 2-4 MB)</td></tr>
                        <tr><td><strong>Wall Texture %</strong></td><td>~5-10% of budget</td></tr>
                        <tr><td><strong>Sprite Memory</strong></td><td>~100-150 KB (enemies, items)</td></tr>
                        <tr><td><strong>Total Graphics</strong></td><td>~350 KB</td></tr>
                        <tr><td><strong>Code + Data</strong></td><td>~150-200 KB</td></tr>
                    </table>
                </div>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Memory Constraint Warning</h4>
                <p>While wall textures use reasonable memory (~200 KB), the total graphics budget (walls + sprites + UI) could approach 500 KB. On embedded systems with limited RAM, this may cause:</p>
                <ul style="margin: 8px 0 8px 20px; padding: 0;">
                    <li>Garbage collection pressure</li>
                    <li>Frame rate drops during texture swaps</li>
                    <li>Difficulty loading additional levels</li>
                </ul>
            </div>
        </div>

        <!-- Section 3: Compression Techniques -->
        <div class="card" id="compression-techniques">
            <h2>3. Texture Compression Techniques</h2>

            <div class="section-block">
                <h3>Technique 1: Color Palette Reduction</h3>
                <p><span class="priority-critical">CRITICAL SAVINGS</span> - Reduce palette from 256 colors to 64 or 16 colors</p>

                <table>
                    <thead>
                        <tr>
                            <th>Palette Size</th>
                            <th>Bits/Pixel</th>
                            <th>Bytes/Tex</th>
                            <th>Savings</th>
                            <th>Quality Impact</th>
                            <th>Suitability</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>256 colors</strong></td>
                            <td>8 bpp</td>
                            <td>16,384 B</td>
                            <td>0%</td>
                            <td><span class="rating-excellent">Excellent</span></td>
                            <td><span class="rating-excellent">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></td>
                        </tr>
                        <tr>
                            <td><strong>64 colors</strong></td>
                            <td>6 bpp</td>
                            <td>12,288 B</td>
                            <td><span class="savings-high">25%</span></td>
                            <td><span class="rating-good">Good</span></td>
                            <td><span class="rating-excellent">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span></td>
                        </tr>
                        <tr>
                            <td><strong>16 colors</strong></td>
                            <td>4 bpp</td>
                            <td>8,192 B</td>
                            <td><span class="savings-high">50%</span></td>
                            <td><span class="rating-moderate">Moderate</span></td>
                            <td><span class="rating-good">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</span></td>
                        </tr>
                    </tbody>
                </table>

                <h4>Implementation</h4>
                <pre class="mono"><code>-- Lua: Convert 8-bit to 6-bit palette
function convertTo6Bit(palette8bit)
    local palette64 = {}
    for i = 1, 64 do
        -- Sample every 4th color
        palette64[i] = palette8bit[i * 4]
    end
    return palette64
end</code></pre>

                <p><strong>Recommendation:</strong> Use 64-color palette for <span class="savings-high">25% memory savings</span> with minimal visual quality loss</p>
            </div>

            <div class="section-block">
                <h3>Technique 2: Run-Length Encoding (RLE)</h3>
                <p><span class="priority-high">HIGH VALUE</span> - Compress consecutive identical texels</p>

                <table>
                    <tr>
                        <th>Texture Type</th>
                        <th>Uncompressed</th>
                        <th>RLE Compressed</th>
                        <th>Savings</th>
                    </tr>
                    <tr>
                        <td>Stone/Brick</td>
                        <td>16 KB</td>
                        <td>6-8 KB</td>
                        <td><span class="savings-high">50-62%</span></td>
                    </tr>
                    <tr>
                        <td>Detailed Patterns</td>
                        <td>16 KB</td>
                        <td>10-12 KB</td>
                        <td><span class="savings-medium">25-37%</span></td>
                    </tr>
                    <tr>
                        <td>Noisy Textures</td>
                        <td>16 KB</td>
                        <td>14-15 KB</td>
                        <td><span class="savings-medium">6-12%</span></td>
                    </tr>
                </table>

                <h4>Implementation</h4>
                <pre class="mono"><code>-- Lua: RLE compression for textures
function compressTextureRLE(pixels)
    local compressed = {}
    local i = 1
    while i <= #pixels do
        local runLength = 1
        while i + runLength <= #pixels and
              pixels[i + runLength] == pixels[i] and
              runLength < 127 do
            runLength = runLength + 1
        end
        table.insert(compressed, pixels[i])
        table.insert(compressed, runLength)
        i = i + runLength
    end
    return compressed
end

function decompressTextureRLE(compressed)
    local pixels = {}
    local i = 1
    while i <= #compressed do
        local pixel = compressed[i]
        local runLength = compressed[i + 1]
        for j = 1, runLength do
            table.insert(pixels, pixel)
        end
        i = i + 2
    end
    return pixels
end</code></pre>
            </div>

            <div class="section-block">
                <h3>Technique 3: Texture Atlases</h3>
                <p><span class="priority-medium">MEDIUM EFFORT</span> - Combine multiple textures into single larger texture</p>

                <table>
                    <tr>
                        <th>Approach</th>
                        <th>Memory</th>
                        <th>Savings</th>
                        <th>Complexity</th>
                    </tr>
                    <tr>
                        <td>Individual Textures</td>
                        <td>12 √ó 16 KB = 192 KB</td>
                        <td>0%</td>
                        <td>Low</td>
                    </tr>
                    <tr>
                        <td><strong>2√ó2 Atlas</strong></td>
                        <td>3 √ó 64√ó64 = 12 KB</td>
                        <td><span class="savings-high">94%</span></td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td><strong>4√ó4 Atlas</strong></td>
                        <td>1 √ó 256√ó256 = 64 KB</td>
                        <td><span class="savings-medium">67%</span></td>
                        <td>Medium</td>
                    </tr>
                </table>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è Trade-offs</h4>
                    <ul style="margin: 8px 0 8px 20px; padding: 0;">
                        <li><strong>Benefits:</strong> 67-94% memory reduction, single texture bind</li>
                        <li><strong>Costs:</strong> Complex UV coordinate calculation, cannot use existing mipmap system</li>
                        <li><strong>VMU Pro Constraint:</strong> No native atlas support, requires manual coordinate mapping</li>
                    </ul>
                </div>
            </div>

            <div class="section-block">
                <h3>Technique 4: Mipmap Optimization</h3>
                <p><span class="priority-critical">ALREADY IMPLEMENTED</span> - Pre-existing mipmap system is <strong>excellent</strong></p>

                <table>
                    <tr>
                        <th>MIP Level</th>
                        <th>Resolution</th>
                        <th>Memory</th>
                        <th>Bandwidth Savings</th>
                    </tr>
                    <tr>
                        <td>MIP0 (Base)</td>
                        <td>128 √ó 128</td>
                        <td>16 KB</td>
                        <td>0% (near)</td>
                    </tr>
                    <tr>
                        <td>MIP1</td>
                        <td>64 √ó 64</td>
                        <td>4 KB</td>
                        <td><span class="savings-high">75%</span></td>
                    </tr>
                    <tr>
                        <td>MIP2</td>
                        <td>32 √ó 32</td>
                        <td>1 KB</td>
                        <td><span class="savings-high">93%</span></td>
                    </tr>
                    <tr>
                        <td>MIP3</td>
                        <td>16 √ó 16</td>
                        <td>256 B</td>
                        <td><span class="savings-high">98%</span></td>
                    </tr>
                </table>

                <p><strong>Analysis:</strong> Current mipmap system is already optimized. 33% memory overhead for 80-90% bandwidth reduction on distant walls.</p>
            </div>

            <div class="section-block">
                <h3>Technique 5: Procedural Generation</h3>
                <p><span class="priority-high">EXPERIMENTAL</span> - Generate textures at runtime using algorithms</p>

                <table>
                    <tr>
                        <th>Pattern Type</th>
                        <th>Storage</th>
                        <th>Generation Time</th>
                        <th>Quality</th>
                    </tr>
                    <tr>
                        <td>Brick/Tile</td>
                        <td><span class="savings-high">~100 B</span></td>
                        <td>< 5ms</td>
                        <td><span class="rating-good">Good</span></td>
                    </tr>
                    <tr>
                        <td>Noise (Stone)</td>
                        <td><span class="savings-high">~200 B</span></td>
                        <td>10-20ms</td>
                        <td><span class="rating-moderate">Moderate</span></td>
                    </tr>
                    <tr>
                        <td>Wood Grain</td>
                        <td><span class="savings-high">~500 B</span></td>
                        <td>15-30ms</td>
                        <td><span class="rating-good">Good</span></td>
                    </tr>
                </table>

                <h4>Example: Brick Pattern Generator</h4>
                <pre class="mono"><code>-- Lua: Procedural brick texture
function generateBrickTexture(width, height)
    local texture = {}
    local brickWidth = 32
    local brickHeight = 16
    local mortarColor = 48  -- Dark gray
    local brickColors = {128, 144, 160}  -- Brown variations

    for y = 0, height - 1 do
        for x = 0, width - 1 do
            local inMortar = (y % brickHeight == 0) or
                            (x % brickWidth == 0)
            local color = inMortar and mortarColor or
                         brickColors[(y / brickHeight +
                                  x / brickWidth) % 3 + 1]
            texture[y * width + x + 1] = color
        end
    end
    return texture
end</code></pre>

                <p><strong>Recommendation:</strong> Use procedural generation for highly repetitive patterns (brick, tile). Can reduce storage to <span class="savings-high">99%</span> for applicable textures.</p>
            </div>
        </div>

        <!-- Section 4: Optimization Recommendations -->
        <div class="card" id="optimization-recommendations">
            <h2>4. Optimization Recommendations</h2>

            <h3>Priority Matrix</h3>

            <table>
                <thead>
                    <tr>
                        <th>Optimization</th>
                        <th>Effort</th>
                        <th>Memory Savings</th>
                        <th>Visual Impact</th>
                        <th>Priority</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>64-Color Palette</strong></td>
                        <td>Low (1-2 days)</td>
                        <td><span class="savings-high">50 KB (25%)</span></td>
                        <td>Minimal</td>
                        <td><span class="priority-critical">CRITICAL</span></td>
                    </tr>
                    <tr>
                        <td><strong>Remove Redundant Textures</strong></td>
                        <td>Low (4 hours)</td>
                        <td><span class="savings-medium">20-30 KB</span></td>
                        <td>None</td>
                        <td><span class="priority-high">HIGH</span></td>
                    </tr>
                    <tr>
                        <td><strong>RLE Compression</strong></td>
                        <td>Medium (3-5 days)</td>
                        <td><span class="savings-high">60-80 KB (30-40%)</span></td>
                        <td>Lossless</td>
                        <td><span class="priority-high">HIGH</span></td>
                    </tr>
                    <tr>
                        <td><strong>Procedural Bricks</strong></td>
                        <td>Medium (2-3 days)</td>
                        <td><span class="savings-high">15 KB per texture</span></td>
                        <td>Good</td>
                        <td><span class="priority-medium">MEDIUM</span></td>
                    </tr>
                    <tr>
                        <td><strong>Mipmap Tuning</strong></td>
                        <td>Low (1 day)</td>
                        <td>0%</td>
                        <td>Positive (smoother)</td>
                        <td><span class="priority-medium">MEDIUM</span></td>
                    </tr>
                    <tr>
                        <td><strong>Texture Atlas (4√ó2)</strong></td>
                        <td>High (1-2 weeks)</td>
                        <td><span class="savings-medium">30-40%</span></td>
                        <td>N/A</td>
                        <td><span class="priority-medium">MEDIUM</span></td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box">
                <h4>‚úÖ Recommended Action Plan</h4>
                <ol style="margin: 8px 0 8px 30px; padding: 0;">
                    <li><strong>Week 1:</strong> Convert all textures to 64-color palette (50 KB savings, minimal quality loss)</li>
                    <li><strong>Week 2:</strong> Implement RLE compression for runtime textures (60-80 KB savings, lossless)</li>
                    <li><strong>Week 3:</strong> Add procedural generation for brick/tile patterns (15-30 KB savings per texture)</li>
                    <li><strong>Week 4:</strong> Optimize mipmap selection and remove redundant variants</li>
                </ol>
                <p><strong>Total Expected Savings:</strong> <span class="savings-high">125-160 KB (62-80%)</span></p>
            </div>
        </div>

        <!-- Section 5: Texture Generation Guide -->
        <div class="card" id="texture-generation-guide">
            <h2>5. Texture Generation Guide</h2>

            <h3>Recommended Tools</h3>

            <table>
                <thead>
                    <tr>
                        <th>Tool</th>
                        <th>Platform</th>
                        <th>Best For</th>
                        <th>Cost</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Aseprite</strong></td>
                        <td>Win/Mac/Linux</td>
                        <td>Pixel art, palette optimization</td>
                        <td>$20 (free trial)</td>
                    </tr>
                    <tr>
                        <td><strong>GIMP</strong></td>
                        <td>Win/Mac/Linux</td>
                        <td>Free-form editing, batch processing</td>
                        <td>Free</td>
                    </tr>
                    <tr>
                        <td><strong>ImageMagick</strong></td>
                        <td>Command-line</td>
                        <td>Batch conversion, scripting</td>
                        <td>Free</td>
                    </tr>
                    <tr>
                        <td><strong>PIL/Pillow</strong></td>
                        <td>Python</td>
                        <td>Automated pipelines</td>
                        <td>Free</td>
                    </tr>
                </tbody>
            </table>

            <h3>Workflow: Converting Textures</h3>

            <div class="section-block">
                <h4>Step 1: Reduce Color Palette</h4>
                <pre class="mono"><code># ImageMagick: Convert to 64 colors
convert wall-1-tile.png -colors 64 -dither FloydSteinberg wall1-64.png

# GIMP: Indexed mode
# 1. Open image
# 2. Image ‚Üí Mode ‚Üí Indexed
# 3. Select "64" for maximum colors
# 4. Check "Generate optimum palette"
# 5. Enable Floyd-Steinberg dithering
# 6. Export as PNG</code></pre>
            </div>

            <div class="section-block">
                <h4>Step 2: Generate Mipmaps</h4>
                <pre class="mono"><code># ImageMagick: Generate mipmap pyramid
convert wall1-64.png -filter Box \
        \( +clone -resize 50% \) \
        \( +clone -resize 25% \) \
        \( +clone -resize 12.5% \) \
        -delete 0 -append wall1_mipmaps.png

# Python: Generate with Pillow
from PIL import Image

img = Image.open('wall1-64.png')
mipmaps = [img]
sizes = [64, 32, 16, 8]

for size in sizes:
    mipmaps.append(img.resize((size, size), Image.Resampling.BOX))

# Save as horizontal strip
result = Image.new('RGB', (64 * 4, 64))
for i, mipmap in enumerate(mipmaps):
    result.paste(mipmap, (i * 64, 0))
result.save('wall1_mipmaps.png')</code></pre>
            </div>

            <div class="section-block">
                <h4>Step 3: Verify Quality</h4>
                <pre class="mono"><code># Lua: Load and display in-game
local texture = vmupro.sprite.new("wall_textures/wall1-64")
vmupro.sprite.draw(texture, 10, 10)

# Check for:
# - Color banding (visible steps between shades)
# - Dithering patterns (should be subtle)
# - Mipmap transition smoothness</code></pre>
            </div>
        </div>

        <!-- Section 6: Implementation Roadmap -->
        <div class="card" id="implementation-roadmap">
            <h2>6. Implementation Roadmap</h2>

            <div class="grid">
                <div class="section-block">
                    <h4>Phase 1: Quick Wins (Week 1)</h4>
                    <ul style="margin: 8px 0 8px 20px; padding: 0;">
                        <li>Convert textures to 64-color palette</li>
                        <li>Remove redundant texture variants</li>
                        <li>Optimize existing mipmap selection</li>
                        <li>Document texture format in code</li>
                    </ul>
                    <p><strong>Expected Savings:</strong> 50-70 KB (25-35%)</p>
                    <p><strong>Effort:</strong> 8-16 hours</p>
                </div>

                <div class="section-block">
                    <h4>Phase 2: Compression (Weeks 2-3)</h4>
                    <ul style="margin: 8px 0 8px 20px; padding: 0;">
                        <li>Implement RLE codec in Lua</li>
                        <li>Update texture loader to decompress on load</li>
                        <li>Pre-compress all textures offline</li>
                        <li>Memory profiling with RLE enabled</li>
                    </ul>
                    <p><strong>Expected Savings:</strong> 60-80 KB (30-40%)</p>
                    <p><strong>Effort:</strong> 24-40 hours</p>
                </div>

                <div class="section-block">
                    <h4>Phase 3: Advanced (Weeks 4-5)</h4>
                    <ul style="margin: 8px 0 8px 20px; padding: 0;">
                        <li>Implement procedural brick generator</li>
                        <li>Create tile pattern library</li>
                        <li>Add hybrid texture system (static + procedural)</li>
                        <li>Performance benchmarking</li>
                    </ul>
                    <p><strong>Expected Savings:</strong> 30-60 KB additional</p>
                    <p><strong>Effort:</strong> 32-48 hours</p>
                </div>
            </div>

            <div class="info-box">
                <h4>üéØ Target Metrics</h4>
                <table>
                    <tr>
                        <td><strong>Current Memory:</strong></td>
                        <td>~200 KB (wall textures)</td>
                    </tr>
                    <tr>
                        <td><strong>Target Memory:</strong></td>
                        <td>< 40-80 KB (wall textures)</td>
                    </tr>
                    <tr>
                        <td><strong>Total Savings:</strong></td>
                        <td><span class="savings-high">120-160 KB (60-80%)</span></td>
                    </tr>
                    <tr>
                        <td><strong>Implementation Time:</strong></td>
                        <td>3-5 weeks</td>
                    </tr>
                    <tr>
                        <td><strong>Visual Quality:</strong></td>
                        <td>Minimal impact with proper dithering</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <div class="card" style="margin-top: 30px;">
            <h3>üìö References & Sources</h3>
            <ul style="margin: 8px 0 8px 20px; padding: 0;">
                <li>VMU Pro SDK Documentation - <code>vmupro-sdk/docs/api/sprites.md</code></li>
                <li>Current game textures - <code>sprites/wall_textures/</code></li>
                <li>Performance analysis - <code>PERFORMANCE_ANALYSIS_REPORT.html</code></li>
                <li>Texture compression research - Agent analysis output</li>
                <li><em>ImageMagick Documentation</em> - Batch processing and color reduction</li>
                <li><em>GIMP Documentation</em> - Indexed color mode and dithering</li>
                <li><em>Pillow (PIL) Documentation</em> - Python image processing</li>
            </ul>

            <h3>‚ö° Quick Reference</h3>
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Current</th>
                    <th>Target</th>
                </tr>
                <tr>
                    <td>Total Textures</td>
                    <td>13</td>
                    <td>10-12 (after cleanup)</td>
                </tr>
                <tr>
                    <td>Base Resolution</td>
                    <td>128√ó128</td>
                    <td>64√ó64 (optional)</td>
                </tr>
                <tr>
                    <td>Color Depth</td>
                    <td>8-bit (256 colors)</td>
                    <td>6-bit (64 colors)</td>
                </tr>
                <tr>
                    <td>Total Memory</td>
                    <td>~200 KB</td>
                    <td>40-80 KB</td>
                </tr>
                <tr>
                    <td>Compression</td>
                    <td>None (PNG only)</td>
                    <td>RLE + 6-bit palette</td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>